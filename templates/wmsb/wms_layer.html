{% extends "site_base.html" %}
{% block title %}{{ layer.title }}{% endblock %}
{% block extra_head %}{{ map.media }}{% endblock %}
{% block content %}
<center><h2>{{ layer.title }}</h2></center>

<h3>Layer Metadata</h3>
TODO

<h3>Layer Preview</h3>
{{ map }}

<div id='layer_fields'>
<h3>Layer Fields/Attributes</h3>
<table border='1' id='layer_fields_table'>
<tr><th>Field Name</th><th>Type</th></tr>
{% for field in fields %}
<tr><td>{{ field.name }}</td><td>{{ field.type }}</td></tr>
{% endfor %}
</table>
</div>

<script type="text/javascript" defer=True>
	var wmsLayer = new OpenLayers.Layer.WMS("{{layer.title}}",
				"{{layer.wms.online_resource}}",
				{layers: "{{layer.name}}", transparent: true},
				{isBaseLayer : false, isVisible: true});
	map.addLayer(wmsLayer);
	map.controls[0].redraw();
	console.log(map);
</script>
{% endblock %}
